<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.69/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.69/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.css" rel="stylesheet">
  <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
  <style>
    #pills-tabContent {
      width: 100%;
      height: 100%;
    }

    #view3D,
    #view2D {
      height: 600px;
    }

    .map-tool-bar {
      position: absolute;
      top: 1em;
      right: 1em;
    }
  </style>
</head>

<body>
  <!-- Tab panes -->
  <div class="tab-content" id="pills-tabContent">
    <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
      <div id="view2D"></div>
      <div class="map-tool-bar">
        <div class="float-right mb-3">
          <button class="btn btn-sm bg-light" type="button" data-toggle="collapse" data-target="#collapseExample"
            data-placement="bottom" title="选择图层" aria-expanded="false" aria-controls="collapseExample">
            <img src="assets/layers.svg" width="24px" />
          </button>
          <button class="btn btn-sm bg-light" type="button" id="btn_home_2d" data-placement="bottom" title="回到原点">
            <img src="assets/home.svg" width="24px" />
          </button>
        </div>
        <div class="collapse" id="collapseExample" style="clear: both;">
          <div class="card card-body">
            <form class="form-inline">
              <label class="my-1 mr-2" for="inlineFormCustomSelectPref">图层选择</label>
              <select class="form-control form-control-sm" id="map2d_layer_selecter">
                <option value="1">矢量图层</option>
                <option value="2">影像图层</option>
              </select>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
      <div id="view3D"></div>
      <div class="map-tool-bar">
        <div class="float-right mb-3">
          <button class="btn btn-sm bg-light" type="button" id="btn_home_3d" data-placement="bottom" title="回到原点">
            <img src="assets/home.svg" width="24px" />
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- Nav tabs -->
  <ul class="nav nav-pills nav-justified mb-3" id="pills-tab" role="tablist">
    <li class="nav-item" role="presentation">
      <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab"
        aria-controls="pills-home" aria-selected="true">
        二维地图</a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab"
        aria-controls="pills-profile" aria-selected="false">
        三维地图</a>
    </li>
  </ul>
</body>
<script>

  $(function () {
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJjMmFjNjdiNi1mMzZlLTRiOWItODRhNC0xNWI2NmIwODYyYmUiLCJpZCI6MjgxMjgsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1OTA2NzYwNTh9.BxJOmxDjvTCxVbaUYidGPhEks8V8lhryYGwWlRKU0BA';
    // We want our two views to be synced across time, so we create
    // a shared clock object that both views share
    var clockViewModel = new Cesium.ClockViewModel();
    var options3D = {
      fullscreenElement: 'view3D',
      terrainProvider: Cesium.createWorldTerrain(),
      baseLayerPicker: false,
      sceneModePicker: false,
      animation: false,
      geocoder: false,
      sceneModePicker: false,
      selectionIndicator: false,
      timeline: false,
      navigationHelpButton: false,
      homeButton: false
    };
    var options2D = {
      sceneMode: Cesium.SceneMode.SCENE2D,
      fullscreenElement: 'view2D',
      baseLayerPicker: false,
      sceneModePicker: false,
      animation: false,
      geocoder: false,
      sceneModePicker: false,
      selectionIndicator: false,
      timeline: false,
      navigationHelpButton: false,
      homeButton: false
    };
    // We create two viewers, a 2D and a 3D one
    var view3D = new Cesium.Viewer("view3D", options3D);
    var view2D = new Cesium.Viewer("view2D", options2D);

    var boundingSphere = new Cesium.BoundingSphere(Cesium.Cartesian3.fromDegrees(117.957471, 27.651282, 500), 5000);
    // Set custom initial position
    view2D.camera.flyToBoundingSphere(boundingSphere, { duration: 0 });
    view3D.camera.flyToBoundingSphere(boundingSphere, { duration: 0 });


    //添加谷歌卫星图到2d地图
    var gle_satellite_layer = view2D.imageryLayers.addImageryProvider(new Cesium.UrlTemplateImageryProvider({
      url: "http://www.google.cn/maps/vt?lyrs=s@800&x={x}&y={y}&z={z}",
    }));
    //添加天地图中文图注到3d地图
    var td_chinese_label_3d = view3D.imageryLayers.addImageryProvider(new Cesium.WebMapTileServiceImageryProvider({
      url: "http://t0.tianditu.com/cva_w/wmts?tk=1b9f8327df331a175d1247be9fa4b03f&service=wmts&request=GetTile&version=1.0.0&LAYER=cva&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default.jpg",
      layer: "tdtAnnoLayer",
      style: "default",
      format: "image/jpeg",
      tileMatrixSetID: "GoogleMapsCompatible"
    }));
    //添加天地图矢量到2d地图
    var td_verctor_layer = view2D.imageryLayers.addImageryProvider(new Cesium.WebMapTileServiceImageryProvider({
      url: "http://t0.tianditu.com/vec_w/wmts?tk=1b9f8327df331a175d1247be9fa4b03f&service=wmts&request=GetTile&version=1.0.0&LAYER=vec&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles",
      layer: "tdtVecBasicLayer",
      style: "default",
      format: "image/jpeg",
      tileMatrixSetID: "GoogleMapsCompatible",
      show: false
    }));
    //添加天地图中文图注到2d地图
    var td_chinese_label_2d = view2D.imageryLayers.addImageryProvider(new Cesium.WebMapTileServiceImageryProvider({
      url: "http://t0.tianditu.com/cva_w/wmts?tk=1b9f8327df331a175d1247be9fa4b03f&service=wmts&request=GetTile&version=1.0.0&LAYER=cva&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default.jpg",
      layer: "tdtAnnoLayer",
      style: "default",
      format: "image/jpeg",
      tileMatrixSetID: "GoogleMapsCompatible"
    }));
    //2d地图切换图层
    $('#map2d_layer_selecter').change(function () {
      //直接切换两个图层的显隐
      td_verctor_layer.show = !td_verctor_layer.show;
      gle_satellite_layer.show = !gle_satellite_layer.show;
      console.log(view2D.imageryLayers);
    });
    //二维地图回到原点按钮处理
    $('#btn_home_2d').click(function () {
      view2D.camera.flyToBoundingSphere(boundingSphere, { duration: 5 });
    });
    //三维地图回到原点按钮处理
    $('#btn_home_3d').click(function () {
      view3D.camera.flyToBoundingSphere(boundingSphere, { duration: 5 });
    });
  });
</script>

</html>